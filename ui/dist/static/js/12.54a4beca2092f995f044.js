(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{ZJlp:function(t,a,e){"use strict";e.r(a);var i=e("uM7l"),n=e.n(i),s=e("BkRI"),l=e.n(s),r=e("6acW"),o=e.n(r),c=e("dCQc"),d=e("wjWc"),u={key:"",name:"",description:""},f={name:"Flag",mixins:[d.a],data:function(){return{dialogDeleteFlagVisible:!1,dialogAddVariantVisible:!1,dialogEditVariantVisible:!1,flag:{variants:[]},newVariant:n()(u),selectedVariant:n()(u)}},computed:{canUpdateFlag:function(){return this.flag.key&&this.flag.name},canAddVariant:function(){return this.newVariant.key},canUpdateVariant:function(){return this.selectedVariant.key}},mounted:function(){this.getFlag()},methods:{formatVariantKey:function(t){t.key=t.key.toLowerCase().split(" ").join("-")},getFlag:function(){var t=this,a=this.$route.params.key;c.a.get("/flags/"+a).then((function(a){t.flag=a.data,t.flag.variants=a.data.variants?a.data.variants:[]})).catch((function(a){t.notifyError("Error loading flag."),console.error(a)}))},deleteFlag:function(){var t=this;c.a.delete("/flags/"+this.flag.key).then((function(){t.notifySuccess("Flag deleted!"),t.$router.push("/flags")})).catch((function(a){t.notifyError("Error deleting flag."),console.error(a)}))},updateFlag:function(){var t=this;c.a.put("/flags/"+this.flag.key,this.flag).then((function(){t.notifySuccess("Flag updated!")})).catch((function(a){a.response&&a.response.data?t.notifyError(o()(a.response.data.message)):(t.notifyError("Error updating flag."),console.error(a))}))},addVariant:function(){var t=this;c.a.post("/flags/"+this.flag.key+"/variants",this.newVariant).then((function(a){t.flag.variants.push(a.data),t.newVariant=n()(u),t.notifySuccess("Variant added!"),t.dialogAddVariantVisible=!1})).catch((function(a){a.response&&a.response.data?t.notifyError(o()(a.response.data.message)):(t.notifyError("Error creating variant."),console.error(a))}))},cancelAddVariant:function(){this.dialogAddVariantVisible=!1,this.newVariant=n()(u)},updateVariant:function(){var t=this;c.a.put("/flags/"+this.flag.key+"/variants/"+this.selectedVariant.id,this.selectedVariant).then((function(a){var e=a.data,i=t.flag.variants.findIndex((function(t){return t.id===e.id}));t.$set(t.flag.variants,i,e),t.selectedVariant=n()(u),t.notifySuccess("Variant updated!"),t.dialogEditVariantVisible=!1})).catch((function(a){a.response&&a.response.data?t.notifyError(o()(a.response.data.message)):(t.notifyError("Error updating variant."),console.error(a))}))},deleteVariant:function(t){var a=this;if(confirm("Are you sure you want to delete this variant?")){var e=this.flag.variants[t];c.a.delete("/flags/"+this.flag.key+"/variants/"+e.id).then((function(){a.flag.variants.splice(t,1),a.notifySuccess("Variant deleted!")})).catch((function(t){t.response&&t.response.data?a.notifyError(o()(t.response.data.message)):(a.notifyError("Error deleting variant."),console.error(t))}))}},editVariant:function(t){this.dialogEditVariantVisible=!0,this.selectedVariant=l()(this.flag.variants[t])},cancelEditVariant:function(){this.dialogEditVariantVisible=!1,this.selectedVariant=n()(u)}}},v=e("JFUb"),p=Object(v.a)(f,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("section",{staticClass:"section"},[e("div",{staticClass:"container"},[e("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumbs"}},[e("ul",[e("li",[e("RouterLink",{attrs:{to:{name:"flags"}}},[t._v("Flags")])],1),t._v(" "),e("li",{staticClass:"is-active"},[e("a",{attrs:{href:"#","aria-current":"page"}},[t._v(t._s(t.flag.key))])])])]),t._v(" "),e("div",{staticClass:"tabs is-boxed"},[e("ul",[t._m(0),t._v(" "),e("li",[e("RouterLink",{attrs:{to:{name:"targeting",params:{key:t.$route.params.key}}}},[t._v("\n              Targeting\n            ")])],1)])]),t._v(" "),e("form",[e("BField",{attrs:{label:"Key"}},[e("BInput",{attrs:{disabled:""},model:{value:t.flag.key,callback:function(a){t.$set(t.flag,"key",a)},expression:"flag.key"}})],1),t._v(" "),e("BField",{attrs:{label:"Name"}},[e("BInput",{attrs:{placeholder:"Flag name",required:""},model:{value:t.flag.name,callback:function(a){t.$set(t.flag,"name",a)},expression:"flag.name"}})],1),t._v(" "),e("BField",{attrs:{label:"Description (optional)"}},[e("BInput",{attrs:{placeholder:"Flag description"},model:{value:t.flag.description,callback:function(a){t.$set(t.flag,"description",a)},expression:"flag.description"}})],1),t._v(" "),e("BField",{attrs:{label:"Enabled"}},[e("BSwitch",{model:{value:t.flag.enabled,callback:function(a){t.$set(t.flag,"enabled",a)},expression:"flag.enabled"}})],1),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"level"},[e("div",{staticClass:"level-left"},[e("div",{staticClass:"level-item"},[e("div",{staticClass:"field is-grouped"},[e("div",{staticClass:"control"},[e("button",{staticClass:"button is-primary",attrs:{disabled:!t.canUpdateFlag},on:{click:function(a){return a.preventDefault(),t.updateFlag()}}},[t._v("\n                    Save\n                  ")])]),t._v(" "),e("div",{staticClass:"control"},[e("RouterLink",{staticClass:"button is-text",attrs:{to:{name:"flags"}}},[t._v("Cancel")])],1)])])]),t._v(" "),e("div",{staticClass:"level-right"},[e("div",{staticClass:"level-item"},[e("div",{staticClass:"field is-grouped"},[e("div",{staticClass:"control"},[e("button",{staticClass:"button is-danger",on:{click:function(a){a.preventDefault(),t.dialogDeleteFlagVisible=!0}}},[t._v("\n                    Delete\n                  ")])])])])])])],1),t._v(" "),e("hr"),t._v(" "),e("h5",{staticClass:"title is-5"},[t._v("Variants")]),t._v(" "),e("p",{staticClass:"subtitle is-7"},[t._v("\n        Return different values based on rules you define\n      ")]),t._v(" "),e("BTable",{attrs:{data:t.flag.variants},scopedSlots:t._u([{key:"default",fn:function(a){return[e("BTableColumn",{attrs:{field:"key",label:"Key",sortable:""}},[t._v("\n            "+t._s(a.row.key)+"\n          ")]),t._v(" "),e("BTableColumn",{attrs:{field:"name",label:"Name",sortable:""}},[t._v("\n            "+t._s(a.row.name)+"\n          ")]),t._v(" "),e("BTableColumn",{attrs:{field:"description",label:"Description",sortable:""}},[t._v("\n            "+t._s(a.row.description)+"\n          ")]),t._v(" "),e("BTableColumn",{attrs:{field:"",label:"",width:"110",centered:""}},[e("a",{staticClass:"button is-white",on:{click:function(e){return e.preventDefault(),t.editVariant(a.index)}}},[e("span",{staticClass:"icon is-small"},[e("i",{staticClass:"fas fa-pencil-alt"})])]),t._v(" "),e("a",{staticClass:"button is-white",on:{click:function(e){return e.preventDefault(),t.deleteVariant(a.index)}}},[e("span",{staticClass:"icon is-small"},[e("i",{staticClass:"fas fa-times"})])])])]}}])}),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("button",{staticClass:"button is-primary",on:{click:function(a){a.preventDefault(),t.dialogAddVariantVisible=!0}}},[t._v("\n            New Variant\n          ")])])])],1)]),t._v(" "),e("div",{staticClass:"modal",class:{"is-active":t.dialogAddVariantVisible},attrs:{id:"addVariantDialog"}},[e("div",{staticClass:"modal-background",on:{click:function(a){return a.preventDefault(),t.cancelAddVariant(a)}}}),t._v(" "),e("div",{staticClass:"modal-content",on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"])?null:t.cancelAddVariant(a)}}},[e("div",{staticClass:"container"},[e("div",{staticClass:"box"},[e("form",[e("BField",{attrs:{label:"New Variant"}},[e("BInput",{attrs:{placeholder:"Key",required:""},on:{input:function(a){return t.formatVariantKey(t.newVariant)}},model:{value:t.newVariant.key,callback:function(a){t.$set(t.newVariant,"key",a)},expression:"newVariant.key"}})],1),t._v(" "),e("BField",{attrs:{label:"Name (optional)"}},[e("BInput",{attrs:{placeholder:"Name"},model:{value:t.newVariant.name,callback:function(a){t.$set(t.newVariant,"name",a)},expression:"newVariant.name"}})],1),t._v(" "),e("BField",{attrs:{label:"Description (optional)"}},[e("BInput",{attrs:{placeholder:"Description"},model:{value:t.newVariant.description,callback:function(a){t.$set(t.newVariant,"description",a)},expression:"newVariant.description"}})],1),t._v(" "),e("div",{staticClass:"field is-grouped"},[e("div",{staticClass:"control"},[e("button",{staticClass:"button is-primary",attrs:{disabled:!t.canAddVariant},on:{click:function(a){return a.preventDefault(),t.addVariant(a)}}},[t._v("\n                  Add Variant\n                ")]),t._v(" "),e("button",{staticClass:"button is-text",on:{click:function(a){return a.preventDefault(),t.cancelAddVariant(a)}}},[t._v("\n                  Cancel\n                ")])])])],1)]),t._v(" "),e("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(a){return a.preventDefault(),t.cancelAddVariant(a)}}})])])]),t._v(" "),e("div",{staticClass:"modal",class:{"is-active":t.dialogEditVariantVisible},attrs:{id:"editVariantDialog"}},[e("div",{staticClass:"modal-background",on:{click:function(a){return a.preventDefault(),t.cancelEditVariant(a)}}}),t._v(" "),e("div",{staticClass:"modal-content",on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"])?null:t.cancelEditVariant(a)}}},[e("div",{staticClass:"container"},[e("div",{staticClass:"box"},[e("form",[e("BField",{attrs:{label:"New Variant"}},[e("BInput",{attrs:{placeholder:"Key",required:""},on:{input:function(a){return t.formatVariantKey(t.selectedVariant)}},model:{value:t.selectedVariant.key,callback:function(a){t.$set(t.selectedVariant,"key",a)},expression:"selectedVariant.key"}})],1),t._v(" "),e("BField",{attrs:{label:"Name (optional)"}},[e("BInput",{attrs:{placeholder:"Name"},model:{value:t.selectedVariant.name,callback:function(a){t.$set(t.selectedVariant,"name",a)},expression:"selectedVariant.name"}})],1),t._v(" "),e("BField",{attrs:{label:"Description (optional)"}},[e("BInput",{attrs:{placeholder:"Description"},model:{value:t.selectedVariant.description,callback:function(a){t.$set(t.selectedVariant,"description",a)},expression:"selectedVariant.description"}})],1),t._v(" "),e("div",{staticClass:"field is-grouped"},[e("div",{staticClass:"control"},[e("button",{staticClass:"button is-primary",attrs:{disabled:!t.canUpdateVariant},on:{click:function(a){return a.preventDefault(),t.updateVariant(a)}}},[t._v("\n                  Update Variant\n                ")]),t._v(" "),e("button",{staticClass:"button is-text",on:{click:function(a){return a.preventDefault(),t.cancelEditVariant(a)}}},[t._v("\n                  Cancel\n                ")])])])],1)]),t._v(" "),e("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(a){return a.preventDefault(),t.cancelEditVariant(a)}}})])])]),t._v(" "),e("div",{staticClass:"modal",class:{"is-active":t.dialogDeleteFlagVisible},attrs:{id:"deleteFlagDialog"}},[e("div",{staticClass:"modal-background",on:{click:function(a){t.dialogDeleteFlagVisible=!1}}}),t._v(" "),e("div",{staticClass:"modal-content",on:{keyup:function(a){if(!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"]))return null;t.dialogDeleteFlagVisible=!1}}},[e("div",{staticClass:"container"},[e("div",{staticClass:"box"},[e("p",{staticClass:"has-text-centered"},[t._v("\n            Are you sure you want to delete this flag?\n          ")]),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"control has-text-centered"},[e("button",{staticClass:"button is-danger",on:{click:function(a){return a.preventDefault(),t.deleteFlag(a)}}},[t._v("\n              Confirm\n            ")]),t._v(" "),e("button",{staticClass:"button is-text",on:{click:function(a){a.preventDefault(),t.dialogDeleteFlagVisible=!1}}},[t._v("\n              Cancel\n            ")])])])]),t._v(" "),e("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(a){t.dialogDeleteFlagVisible=!1}}})])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("li",{staticClass:"is-active"},[a("a",[this._v("Details")])])}],!1,null,null,null);a.default=p.exports},dCQc:function(t,a,e){"use strict";e.d(a,"a",(function(){return n}));var i=e("vDqi"),n=e.n(i).a.create({baseURL:"//"+window.location.host+"/api/v1/"})},wjWc:function(t,a,e){"use strict";a.a={methods:{notifySuccess:function(t){this.$toast.open({type:"is-primary",position:"is-bottom",message:t})},notifyError:function(t){this.$toast.open({type:"is-danger",position:"is-bottom",message:t,duration:3e3})}}}}}]);
//# sourceMappingURL=12.54a4beca2092f995f044.js.map